<!DOCTYPE html>
{% extends "layout.html" %}
{% block content %}
  {% if evaluation %}
    <h2> Evaluation </h2>
    <table style="width:100%">
      {% for query in evaluation %}
        {% if query != "mean" %}
          <tr>
            <td> Query: </td>
            <td colspan="2"> {{query }} </td>
          </tr>
          <tr>
            <td> </td>
            <td> <b> P@3: </b></td>
            <td> {{ "%0.3f" % evaluation[query][0] }} </td>
          </tr>
          <tr>
            <td> </td>
            <td> <b> P@R: </b></td>
            <td> {{ "%0.3f" % evaluation[query][1] }} </td>
          </tr>
          <tr>
            <td> </td>
            <td> <b> AP: </b></td>
            <td> {{ "%0.3f" % evaluation[query][2] }} </td>
          </tr>
        {% endif %}
      {% endfor %}
      <tr>
        <td> Mean: </td>
      </tr>
      <tr>
        <td> </td>
        <td> <b> MP@3: </b></td>
        <td> {{ "%0.3f" % evaluation["mean"][0] }} </td>
      </tr>
      <tr>
        <td> </td>
        <td> <b> MP@R: </b></td>
        <td> {{ "%0.3f" % evaluation["mean"][1] }} </td>
      </tr>
      <tr>
        <td> </td>
        <td> <b> MAP: </b></td>
        <td> {{ "%0.3f" % evaluation["mean"][2] }} </td>
      </tr>
    </table>
    <br>
    <br>
    <div style="width:100%;">
      <canvas id="exampleChart" style="display: block; width: 1012px; height: 506px;" width="1012" height="506" class="chartjs-render-monitor"></canvas>
    </div>
    <script>
      var config = {
        type: 'line',
        data: {
		labels: [ {% for query in evaluation %} "{{ query }}", {% endfor %} ],
          datasets:
            [
              {
          	    label: 'Precision@3',
          	    fill: false,
          	    backgroundColor: window.chartColors.red,
          	    borderColor: window.chartColors.red,
		    data: [ {% for query in evaluation %} {{ evaluation[query][0] }}, {% endfor %} ],
              },
    	      {
          	    label: 'Precision@R',
          	    fill: false,
          	    backgroundColor: window.chartColors.blue,
          	    borderColor: window.chartColors.blue,
		    data: [ {% for query in evaluation %} {{ evaluation[query][1] }}, {% endfor %} ],
              },
              {
          	    label: 'AveragePrecision',
          	    fill: false,
          	    backgroundColor: window.chartColors.yellow,
          	    borderColor: window.chartColors.yellow,
		    data: [ {% for query in evaluation %} {{ evaluation[query][2] }}, {% endfor %} ],
              },
            ]
        },
        options:
          {responsive: true,
           title: { display: true, text: 'Example Evaluation Line Chart' },
           tooltips: { mode: 'index', intersect: false },
           hover: { mode: 'nearest', intersect: true },
           scales: { xAxes: [{ display: true, scaleLabel: { display: true, labelString: 'Query'} }],
                     yAxes: [{ display: true, scaleLabel: { display: true, labelString: 'Value'} }] }}
      };
      
      var ctx = document.getElementById('exampleChart').getContext('2d');
      window.myLine = new Chart(ctx, config);
    
    </script>
  {% endif %}
{% endblock content %}
